<!doctype html>
<title>The Forest of Lyrica</title>
<link rel="stylesheet" href="lyrica.css">

<div id="stage">
  <h1>The Forest of Lyrica</h1>
  <img src="" width="300" height="267">
  <p id="output"></p>
  <input id="input" type="text" placeholder="Enter your action..."> 
  <button>enter</button>
</div>

<script>
//Create the map
var map = [];

map[0] = "An old stone keep.";
map[1] = "A deep well.";
map[2] = "A sunny glade";
map[3] = "A sleeping dragon";
map[4] = "A narrow pathway";
map[5] = "An ancient gate";
map[6] = "The edge of a river";
map[7] = "A lonely wooden bench";
map[8] = "An isolated cottage. Faint music comes from inside";

var images = [];
images[0] ="keep.png";
images[1] ="well.png";
images[2] ="glade.png";
images[3] ="dragon.png";
images[4] ="path.png";
images[5] ="gate.png";
images[6] ="river.png";
images[7] ="bench.png";
images[8] ="cottage.png";

//set the players start location and init player's input
var mapLocation = 4;
var playersInput = "";
var gameMessage = "";
//Create array of actions and a variable for the current action
var actionsIKnow = ["north", "east", "south", "west"];
var action = "";
//The output and input elements
var output = document.querySelector("#output");
var input = document.querySelector("#input");
//The image
var image = document.querySelector("img");
//the button
var button = document.querySelector("button");
button.style.cursor = "pointer";
button.addEventListener("click", clickHandler, false);

//Display the player's location
render();

function clickHandler(){
  playGame();
}

function playGame(){
  playersInput = input.value;
  playersInput = playersInput.toLowerCase();

  gameMessage = "";
  action = "";
  
  //Figure out the player's action
  for (var i = 0; i<actionsIKnow.length; i++){
    if(playersInput.indexOf(actionsIKnow[i]) !==-1)
    {
      action = actionsIKnow[i];
      //console.log("players action: " + action);
      break;
    }
  }

  switch(action)
  {
    case "north":
      mapLocation -= 3;
      //mapLocation = mapLocation -3
      break;
    case "east":
      mapLocation++;
      break;
    case "south":
      mapLocation += 3;
      break;
    case "west":
      mapLocation--;
      break;
    default:
      gameMessage = "I don't understand that"
  }
  render();
}

function render(){
  //Render the location
  output.innerHTML = map[mapLocation];
  image.src = "../images/" + images[mapLocation];

  //Display the game message
  output.innerHTML += "<br><em>" + gameMessage + "</em>"
}
</script>
